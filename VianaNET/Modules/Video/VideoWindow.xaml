<ad:DockableContent
	x:Class="VianaNET.VideoWindow"
	xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
	xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:Viana="clr-namespace:VianaNET"
    xmlns:ad="clr-namespace:AvalonDock;assembly=AvalonDock"
    xmlns:lex="http://schemas.root-project.org/xaml/presentation"
    lex:LocalizeDictionary.DesignCulture="de"
    Width="630"
    Height="436" Title="{lex:LocText VianaNET:Labels:VideoWindowTitle}" 
  DockableStyle="Dockable" HideOnClose="False" Loaded="DockableContent_Loaded">
  <ad:DockableContent.Resources>
    <ResourceDictionary Source="../../VianaControls/VianaStyle.xaml"/>
  </ad:DockableContent.Resources>
  <ad:DockableContent.Icon>
    <Image Source="..\..\Images\Video16.png" Height="16" Width="16"/>
  </ad:DockableContent.Icon>
  <Grid>
    <Grid.RowDefinitions>
      <RowDefinition Height="*"/>
      <RowDefinition Height="32"/>
    </Grid.RowDefinitions>
    <Grid Grid.Row="0" Name="ContentPanel" Background="{Binding Path=GradientBackground, Source={x:Static Viana:Calibration.Instance}}">
      <Grid.ColumnDefinitions>
        <ColumnDefinition Width="*"/>
        <ColumnDefinition Width="Auto"/>
      </Grid.ColumnDefinitions>
      <Grid Name="LeftVideoPanel" Grid.Column="0">

        <Canvas Name="OverlayCanvas" SizeChanged="OverlayCanvas_SizeChanged">
          <Path Name="OriginPath" Stroke="Red" StrokeThickness="1" Visibility="Hidden">
            <Path.Data>
              <GeometryGroup FillRule="EvenOdd">
                <LineGeometry StartPoint="2,5" EndPoint="8,5" />
                <LineGeometry StartPoint="5,2" EndPoint="5,8" />
                <EllipseGeometry Center="5,5" RadiusX="5" RadiusY="5"/>
              </GeometryGroup>
            </Path.Data>
          </Path>
          <Line Name="RulerLine" X1="0" Y1="0" X2="50" Y2="50" Stroke="Red" StrokeThickness="1" Visibility="Hidden" />
          <Border Name="RulerLabelBorder" Background="#99FFFFFF" CornerRadius="3" Visibility="Hidden" >
            <Label Name="RulerLabel" Padding="1" 
                   Content="{Binding Path=RulerValueInRulerUnits,
              Source={x:Static Viana:Calibration.Instance},
              Converter={StaticResource RulerUnitStringConverter}, 
              ConverterParameter={StaticResource PositionMeasurement}}"/>
          </Border>
          <Line Name="TopLine" Visibility="Hidden" Stroke="Red" StrokeThickness="3" X1="0" X2="200" Y1="10" Y2="10" MouseEnter="TopLine_MouseEnter" MouseLeave="Line_MouseLeave" MouseLeftButtonDown="Line_MouseLeftButtonDown" MouseMove="Line_MouseMove" MouseLeftButtonUp="Line_MouseLeftButtonUp" />
          <Line Name="LeftLine" Visibility="Hidden" Stroke="Red" StrokeThickness="3" X1="10" X2="10" Y1="0" Y2="100" MouseEnter="LeftLine_MouseEnter" MouseLeave="Line_MouseLeave" MouseLeftButtonDown="Line_MouseLeftButtonDown" MouseLeftButtonUp="Line_MouseLeftButtonUp" MouseMove="Line_MouseMove" />
          <Line Name="BottomLine" Visibility="Hidden" Stroke="Red" StrokeThickness="3" X1="0" X2="100" Y1="100" Y2="100" MouseEnter="BottomLine_MouseEnter" MouseLeave="Line_MouseLeave" MouseLeftButtonDown="Line_MouseLeftButtonDown" MouseLeftButtonUp="Line_MouseLeftButtonUp" MouseMove="Line_MouseMove" />
          <Line Name="RightLine" Visibility="Hidden" Stroke="Red" StrokeThickness="3" X1="100" X2="100" Y1="0" Y2="100" MouseEnter="RightLine_MouseEnter" MouseLeave="Line_MouseLeave" MouseLeftButtonDown="Line_MouseLeftButtonDown" MouseLeftButtonUp="Line_MouseLeftButtonUp" MouseMove="Line_MouseMove" />
          <Path Name="OuterRegion" Visibility="Hidden" Fill="#55FF0000">
            <Path.Data>
              <CombinedGeometry GeometryCombineMode="Xor">
                <CombinedGeometry.Geometry1>
                  <RectangleGeometry Rect="0,0,100,100"/>
                </CombinedGeometry.Geometry1>
                <CombinedGeometry.Geometry2>
                  <RectangleGeometry Rect="10,10,80,80" />
                </CombinedGeometry.Geometry2>
              </CombinedGeometry>
            </Path.Data>
          </Path>
        </Canvas>
      </Grid>
      <Viana:BlobsControl Width="Auto" Height="Auto" Visibility="Collapsed" Grid.Column="1" x:Name="BlobsControl"/>
    </Grid>
    <Grid Grid.Row="1" Background="{StaticResource PropertiesBackgroundBrush}" >
      <Grid.ColumnDefinitions>
        <ColumnDefinition Width="Auto" MinWidth="100" />
        <ColumnDefinition Width="*"/>
      </Grid.ColumnDefinitions>
      <StackPanel Grid.Column="0" Orientation="Horizontal" Margin="10,0,10,0" >
        <Viana:ImageButton x:Name="btnStart" Height="25" Width="25" ImageSource="..\..\Images\Start16.png" Click="btnStart_Click" />
        <Viana:ImageButton x:Name="btnPause" Height="25" Width="25" ImageSource="..\..\Images\Pause_16.png" Click="btnPause_Click" Visibility="Collapsed"/>
        <Viana:ImageButton x:Name="btnStop" Height="25" Width="25" ImageSource="..\..\Images\Stop16.png" Click="btnStop_Click" />
        <Viana:ImageButton x:Name="btnRevert" Height="25" Width="25" ImageSource="..\..\Images\Revert16.png" Click="btnRevert_Click"/>
      </StackPanel>
      <Viana:MediaSlider
        Grid.Column="1" 
        x:Name="timelineSlider" 
        IsSelectionRangeEnabled="True" 
        TickDownClicked="timelineSlider_TickDownClicked"
        TickUpClicked="timelineSlider_TickUpClicked"
        FrameTime="{Binding Path=VideoPlayerElement.FrameTime, Source={x:Static Viana:Video.Instance}}"
        Value="{Binding Path=VideoPlayerElement.MediaPosition, Source={x:Static Viana:Video.Instance}}" 
        Maximum="{Binding Path=VideoPlayerElement.MediaDuration, Source={x:Static Viana:Video.Instance}}"
        SmallChange="1" 
        SelectionStart="10" 
        TickPlacement="BottomRight" 
        Interval="1" 
        SelectionEnd="50" 
         Minimum="0" 
        MouseLeftButtonDown="timelineSlider_MouseLeftButtonDown"
        MouseLeftButtonUp="timelineSlider_MouseLeftButtonUp"
        MouseMove="timelineSlider_MouseMove"
          />
    </Grid>
  </Grid>
</ad:DockableContent>
